Class PEX.GCP.PubSub.Operation Extends Ens.BusinessOperation
{

Parameter ADAPTER = "EnsLib.PEX.OutboundAdapter";

Property Adapter As EnsLib.PEX.OutboundAdapter;

/// The "Remote Settings" field in the Business Operation settings should include the following:
/// <ul>
/// <li><u>LogLevel</u><br/>Default: INFO<br/>Level of detail for the adapter to log to the IRIS Event Log. Possible values, in ascending order of detail are OFF, FATAL, ERROR, WARN, INFO, DEBUG, TRACE<br/><br/></li>
/// <li><u>InternalQueueSize</u><br/>Default: 1000<br/>The maximum size of the internal message queue. Defaults to 1000</li>
/// <li><u>GCPCredentials</u><br/>Default: [NONE]<br/>This is a JSON string generated by GCP. Note: the JSON string should be flattened into only one line -- remove all carriage returns/linefeeds before entering the string into Remote Settings<br/><br/></li>
/// <li><u>GCPProjectID</u><br/>Default: [NONE]<br/>The GCP project that the subscription belongs to<br/><br/></li>
/// <li><u>GCPTopicID</u><br/>Default: [NONE]<br/>The GCP ID for the subscription to receive messages for<br/><br/></li>
/// </ul>
/// See PEX documentation for more information about the Remote Settings field.
Parameter SETTINGS;

Parameter INVOCATION = "Queue";

Method PublishMessage(pRequest As PEX.GCP.PubSub.Msg.Message, Output pResponse As PEX.GCP.PubSub.Msg.PublishResponse) As %Status
{
	set pResponse=..Adapter.%DispatchMethod("OnMessage",pRequest)
	Quit $$$OK
}

XData MessageMap
{
<MapItems>
	<MapItem MessageType="PEX.GCP.PubSub.Msg.Message"> 
		<Method>PublishMessage</Method>
	</MapItem>
</MapItems>
}

}
